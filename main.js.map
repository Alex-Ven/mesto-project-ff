{"version":3,"file":"main.js","mappings":"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","sources":["webpack://praktikum/./src/scripts/modal.js","webpack://praktikum/./src/scripts/api.js","webpack://praktikum/./src/scripts/card.js","webpack://praktikum/./src/scripts/validation.js","webpack://praktikum/./src/scripts/index.js"],"sourcesContent":["export function openPopup(popup) {\n  popup.classList.add('popup_is-opened');\n  popup.addEventListener('click', closePopapOnOverlay)\n  document.addEventListener('keydown', closePopapByEsc);\n}\n\n\nexport function closePopup(popup) {\n  popup.classList.remove('popup_is-opened');\n  popup.addEventListener('click', closePopapOnOverlay)\n  document.removeEventListener('keydown', closePopapByEsc);\n  \n}\n\nfunction closePopapByEsc(evt, popup) {\n  if (evt.key === 'Escape') {\n    const openedPopup = document.querySelector(\".popup_is-opened\");\n    closePopup(openedPopup);\n  }\n}\n\nexport function closePopapOnOverlay(evt) {\n  if (evt.target === evt.currentTarget) {\n    closePopup(evt.currentTarget);\n  }\n};","// конфиг когорты\n\nconst config = {\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-21\",\n  headers: {\n    authorization: \"114f9c26-8877-4f32-9463-7751c1b4ac62\",\n    \"Content-Type\": \"application/json\",\n  },\n};\n\n// проверка ответа\n\nfunction checkResponse(res) {\n  if (res.ok) {\n    return res.json();\n  } else {\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n}\n\n// получение данных о пользователе\n\nexport const getUserData = () => {\n  return fetch(`${config.baseUrl}/users/me`, {\n    method: \"GET\",\n    headers: config.headers,\n  }).then(checkResponse);\n};\n\n// получение карточек\n\nexport const getInitialCards = () => {\n  return fetch(`${config.baseUrl}/cards`, {\n    method: \"GET\",\n    headers: config.headers,\n  }).then(checkResponse);\n};\n\n// обновление данных профиля\n\nexport const patchUserData = (name, about) => {\n  return fetch(`${config.baseUrl}/users/me`, {\n    method: \"PATCH\",\n    headers: config.headers,\n    body: JSON.stringify({\n      name,\n      about,\n    }),\n  }).then(checkResponse);\n};\n\n// отправляем новую карточку на сервер\n\nexport const postNewCard = (name, link) => {\n  return fetch(`${config.baseUrl}/cards`, {\n    method: \"POST\",\n    headers: config.headers,\n    body: JSON.stringify({ name, link }),\n  }).then(checkResponse);\n};\n\n// запрос на удаление карточки\n\nexport const removeCard = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\n    method: \"DELETE\",\n    headers: config.headers,\n  }).then(checkResponse);\n};\n\n// запрос на лайк карточки\n\nexport const addLikeCard = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\n    method: \"PUT\",\n    headers: config.headers,\n  }).then(checkResponse);\n};\n\nexport const deleteLikeCard = (cardId) => {\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\n    method: \"DELETE\",\n    headers: config.headers,\n  }).then(checkResponse);\n};\n\n// запрос на изменение аватара\n\nexport const updateAvatar = (avatarUrl) => {\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\n    method: \"PATCH\",\n    headers: config.headers,\n    body: JSON.stringify({\n      avatar: avatarUrl,\n    }),\n  }).then(checkResponse);\n};\n","import {\n  removeCard,\n  addLikeCard,\n  deleteLikeCard\n} from \"./api.js\";\n\nconst cardTemplate = document.querySelector(\"#card-template\").content;\nexport const cardsPlacesList = document.querySelector(\".places__list\");\n\nexport function createCard(\n  userId,\n  cardData,\n  deleteCardFn,\n  likeCardFn,\n  openPicturePopup\n) {\n  const cardElement = cardTemplate.querySelector(\".places__item\").cloneNode(true);\n  const cardImage = cardElement.querySelector(\".card__image\");\n  const cardTitle = cardElement.querySelector(\".card__title\");\n  const cardDeleteButton = cardElement.querySelector(\".card__delete-button\");\n  const cardlikeButton = cardElement.querySelector(\".card__like-button\");\n  const cardLikeCounter = cardElement.querySelector(\".card__like-counter\");\n\n  cardImage.src = cardData.link;\n  cardImage.alt = \"Фотография с места - \" + cardData.name;\n  cardTitle.textContent = cardData.name;\n  cardLikeCounter.textContent = cardData.likes.length;\n\n  if (userId !== cardData.owner._id) {\n    cardDeleteButton.style.display = \"none\";\n    } else {\n      cardDeleteButton.addEventListener(\"click\", () => {\n        const cardId = cardData._id;\n        deleteCardFn(cardElement, cardId);\n      });\n    }\n\n    const isLiked = cardData.likes.some((like) => like._id === userId);\n  if (isLiked) {\n    cardlikeButton.classList.add(\"card__like-button_is-active\");\n  }\n  \n  cardlikeButton.addEventListener(\"click\", () => {\n    likeCardFn(cardLikeCounter, cardlikeButton, cardData);\n  });\n  cardImage.addEventListener(\"click\", function () {\n    openPicturePopup(cardData.link, cardData.name);\n  });\n\n  return cardElement;\n}\n\nexport function deleteCardFn(cardElement, cardId) {\n  const cardToRemove = cardElement.closest('.card');\n  removeCard(cardId)\n  .then(() => {\n    cardToRemove.remove();\n  })\n  .catch((err) => {\n    console.error(`\"Произошла ошибка при удалении карточки:\", ${err}`);\n  });\n}\n\nexport function likeCardFn(cardLikeCounter, cardlikeButton, cardData) {\n  if (cardlikeButton.classList.contains(\"card__like-button_is-active\")) {\n    deleteLikeCard(cardData._id)\n    .then((res) => {\n      cardlikeButton.classList.toggle(\"card__like-button_is-active\");\n      cardLikeCounter.textContent = res.likes.length;\n    })\n    .catch((err) => {\n      console.error(\"Произошла ошибка при удалении лайка:\", err);\n    });\n  } else {\n    addLikeCard(cardData._id)\n    .then((res) => {\n      cardlikeButton.classList.toggle(\"card__like-button_is-active\");\n      cardLikeCounter.textContent = res.likes.length;\n    })\n    .catch((err) => {\n      console.error(\"Произошла ошибка при добавлении лайка:\", err);\n    });\n  }\n}\n\n\n","export const validationSettings = {\n  formSelector: \".popup__form\",\n  inputSelector: \".popup__input\",\n  submitButtonSelector: \".popup__button\",\n  inactiveButtonClass: \"popup__button_disabled\",\n  inputErrorClass: \"popup__input_type_error\",\n  errorClass: \"popup__error_visible\",\n};\n\n// Функция, которая добавляет класс с ошибкойc\nconst showInputError = (\n  formElement,\n  inputElement,\n  errorMessage,\n  validationSettings\n) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.add(validationSettings.inputErrorClass);\n  errorElement.classList.add(validationSettings.errorClass);\n  errorElement.textContent = errorMessage;\n};\n\n// Функция, которая удаляет класс с ошибкой\nconst hideInputError = (formElement, inputElement, validationSettings) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  if (errorElement) {\n  inputElement.classList.remove(validationSettings.inputErrorClass);\n  errorElement.classList.remove(validationSettings.errorClass);\n  errorElement.textContent = \"\";\n  }\n};\n\n// Функция, которая проверяет валидность поля\nexport const isValid = (formElement, inputElement, validationSettings) => {\n  if (inputElement.validity.patternMismatch) {\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n  if (!inputElement.validity.valid) {\n    showInputError(\n      formElement,\n      inputElement,\n      inputElement.validationMessage,\n      validationSettings\n    );\n  } else {\n    hideInputError(formElement, inputElement, validationSettings);\n  }\n};\n\nconst hasInvalidInput = (inputList) => {\n  return inputList.some((inputElement) => {\n    return !inputElement.validity.valid;\n  });\n};\n\nconst toggleButtonState = (inputList, buttonElement, validationSettings) => {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.classList.add(validationSettings.inactiveButtonClass);\n    buttonElement.setAttribute(\"disabled\", true);\n  } else {\n    buttonElement.classList.remove(validationSettings.inactiveButtonClass);\n    buttonElement.removeAttribute(\"disabled\");\n  }\n};\n\n// Вызовем функцию isValid на каждый ввод символа\nconst setEventListeners = (formElement, validationSettings) => {\n  const inputList = Array.from(\n    formElement.querySelectorAll(validationSettings.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(\n    validationSettings.submitButtonSelector\n  );\n  toggleButtonState(inputList, buttonElement, validationSettings);\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", () => {\n      isValid(formElement, inputElement, validationSettings);\n      toggleButtonState(inputList, buttonElement, validationSettings);\n    });\n  });\n};\n\nexport const enableValidation = (validationSettings) => {\n  const formList = Array.from(\n    document.querySelectorAll(validationSettings.formSelector)\n  );\n  formList.forEach((formElement) => {\n    formElement.addEventListener(\"submit\", function (evt) {\n      evt.preventDefault();\n    });\n    setEventListeners(formElement, validationSettings);\n  });\n};\n\nexport const clearValidation = (formElement, validationSettings) => {\n  const inputList = Array.from(\n    formElement.querySelectorAll(validationSettings.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(\n    validationSettings.submitButtonSelector\n  );\n  inputList.forEach((inputElement) => {\n    hideInputError(formElement, inputElement, validationSettings);\n    inputElement.value = \"\";\n  });\n  toggleButtonState(inputList, buttonElement, validationSettings);\n};\n","import \"../pages/index.css\";\nimport { initialCards } from \"./cards\";\nimport { openPopup, closePopup } from \"./modal.js\";\nimport {\n  createCard,\n  deleteCardFn,\n  likeCardFn,\n  cardsPlacesList,\n} from \"./card.js\";\n\nimport {\n  enableValidation,\n  validationSettings,\n  clearValidation,\n} from \"./validation\";\n\nimport {\n  getUserData,\n  getInitialCards,\n  updateAvatar,\n  patchUserData,\n  postNewCard,\n} from \"./api.js\";\n\nlet userAvatar = \"\";\nexport let userId = \"\";\n\nenableValidation(validationSettings);\n\nconst popupAddCard = document.querySelector(\".popup_type_new-card\");\nconst popupProfile = document.querySelector(\".popup_type_edit\");\nconst addButton = document.querySelector(\".profile__add-button\");\nconst editButton = document.querySelector(\".profile__edit-button\");\nconst profileName = document.querySelector(\".profile__title\");\nconst profileDescription = document.querySelector(\".profile__description\");\nconst profileForm = document.forms.editProfile;\nconst avatarFormElement = document.forms.avatarForm;\nconst changeAvatarForm = avatarFormElement.querySelector(\n  \".popup__input_type_avatar_url\"\n);\nconst avatarForm = document.querySelector(\".popup_type-avatar\");\nconst profileAvatar = document.querySelector(\".profile__image\");\nconst formInput = profileForm.querySelector(\".popup__input\");\nconst profileFormName = profileForm.querySelector(\".popup__input_type_name\");\nconst profileFormDescription = profileForm.querySelector(\n  \".popup__input_type_description\"\n);\nconst newPlaceForm = document.forms.newPlace;\nconst newPlaceCardName = newPlaceForm.elements[\"place-name\"];\nconst newPlaceCardlink = newPlaceForm.elements[\"place-link\"];\nconst picturePopup = document.querySelector(\".popup_type_image\");\nconst picturePopupImage = document.querySelector(\".popup__image\");\nconst picturePopupCaption = document.querySelector(\".popup__caption\");\nconst popupCloseButtons = document.querySelectorAll(\".popup\");\n\nfunction openPicturePopup(link, alt) {\n  picturePopupImage.src = link;\n  picturePopupImage.alt = alt;\n  picturePopupCaption.textContent = alt;\n  openPopup(picturePopup);\n}\n\nfunction addCardToPlacesList(evt) {\n  evt.preventDefault()\n  function makeRequest() {\n    return postNewCard(newPlaceCardName.value, newPlaceCardlink.value )\n    .then((addedCard) => {\n      const newPlaceCard = createCard(\n        userId,\n        addedCard,\n        deleteCardFn,\n        likeCardFn,\n        openPicturePopup\n      );\n      cardsPlacesList.prepend(newPlaceCard);\n      closePopup(popupAddCard);\n      newPlaceForm.reset();\n    });\n  }\n  handleSubmit(makeRequest, evt);\n}\n\nfunction setProfileForm() {\n  profileFormName.value = profileName.textContent;\n  profileFormDescription.value = profileDescription.textContent;\n}\n\nfunction changeProfile(evt) {\n  evt.preventDefault();\n  function makeRequest() {\n    const name = profileFormName.value;\n    const about = profileFormDescription.value;\n    return patchUserData(name, about).then((dataUser) => {\n      profileName.textContent = dataUser.name;\n      profileDescription.textContent = dataUser.about;\n      console.dir(name, about);\n      closePopup(popupProfile);\n      profileForm.reset();\n    });\n  }\n  handleSubmit(makeRequest, evt);\n}\n\nfunction openProfilePopup() {\n  clearValidation(profileForm, validationSettings);\n  setProfileForm();\n  openPopup(popupProfile);\n}\n\n// Установка слушателя на кнопку открытия формы изменения аватара\nprofileAvatar.addEventListener(\"click\", function () {\n  clearValidation(avatarForm, validationSettings);\n  openPopup(avatarForm);\n});\n\nfunction changeProfileAvatar(evt) {\n  evt.preventDefault();\n  const saveButton = evt.submitter;\n  const avatarUrl = avatarFormElement.elements[\"avatar-link\"].value;\n  renderLoading(true, saveButton);\n\n  updateAvatar(avatarUrl)\n    .then((res) => {\n      profileAvatar.setAttribute(\n        \"style\",\n        `background-image: url('${res.avatar}')`\n      );\n      closePopup(avatarForm);\n    })\n    .catch((error) => {\n      console.error(\"Ошибка при сохранении аватара:\", error);\n    })\n    .finally(() => {\n      renderLoading(false, saveButton);\n    });\n}\n\nnewPlaceForm.addEventListener(\"submit\", addCardToPlacesList);\nprofileForm.addEventListener(\"submit\", changeProfile);\navatarFormElement.addEventListener(\"submit\", changeProfileAvatar);\n\naddButton.addEventListener(\"click\", function () {\n  clearValidation(newPlaceForm, validationSettings);\n  openPopup(popupAddCard);\n});\neditButton.addEventListener(\"click\", openProfilePopup);\n\npopupCloseButtons.forEach(function (popup) {\n  popup.addEventListener(\"click\", function (evt) {\n    if (\n      evt.target === evt.currentTarget ||\n      evt.target.classList.contains(\"popup__close\")\n    ) {\n      closePopup(popup);\n    }\n  });\n});\n\nPromise.all([getInitialCards(), getUserData()])\n  .then(([initialCards, userData]) => {\n    userAvatar = userData.avatar;\n    userId = userData._id;\n    profileName.textContent = userData.name;\n    profileDescription.textContent = userData.about;\n    profileAvatar.style.backgroundImage = `url(${userData.avatar})`;\n\n    initialCards.forEach(function (cardData) {\n      const cardElement = createCard(\n        userId,\n        cardData,\n        deleteCardFn,\n        likeCardFn,\n        openPicturePopup\n      );\n      cardsPlacesList.append(cardElement);\n    });\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n\n// Функция для управления текстом кнопки во время загрузки\nfunction renderLoading(\n  isLoading,\n  button,\n  initialText = \"Сохранить\",\n  loadingText = \"Сохранение...\"\n) {\n  if (isLoading) {\n    button.textContent = loadingText;\n  } else {\n    button.textContent = initialText;\n  }\n}\n\n// Универсальная функция, которая принимает функцию запроса, объект события и текст во время загрузки\nexport function handleSubmit(request, evt, loadingText = \"Сохранение...\") {\n  evt.preventDefault();\n\n  const submitButton = evt.submitter;\n  const initialText = submitButton.textContent;\n  renderLoading(true, submitButton, initialText, loadingText);\n\n  // Выполнение запроса\n  request()\n    .then(() => {\n      evt.target.reset(); // Сброс формы после успешной отправки\n    })\n    .catch((err) => {\n      console.error(`Ошибка: ${err}`);\n    })\n    .finally(() => {\n      renderLoading(false, submitButton, initialText, loadingText); // Возврат исходного текста кнопки\n    });\n}\n"],"names":["openPopup","popup","classList","add","addEventListener","closePopapOnOverlay","document","closePopapByEsc","closePopup","remove","removeEventListener","evt","key","querySelector","target","currentTarget","config","baseUrl","headers","authorization","checkResponse","res","ok","json","Promise","reject","concat","status","cardTemplate","content","cardsPlacesList","createCard","userId","cardData","deleteCardFn","likeCardFn","openPicturePopup","cardElement","cloneNode","cardImage","cardTitle","cardDeleteButton","cardlikeButton","cardLikeCounter","src","link","alt","name","textContent","likes","length","owner","_id","style","display","cardId","some","like","cardToRemove","closest","fetch","method","then","removeCard","catch","err","console","error","contains","toggle","addLikeCard","validationSettings","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","hideInputError","formElement","inputElement","errorElement","id","toggleButtonState","inputList","buttonElement","validity","valid","hasInvalidInput","removeAttribute","setAttribute","clearValidation","Array","from","querySelectorAll","forEach","value","preventDefault","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","isValid","setEventListeners","enableValidation","popupAddCard","popupProfile","addButton","editButton","profileName","profileDescription","profileForm","forms","editProfile","avatarFormElement","avatarForm","profileAvatar","profileFormName","profileFormDescription","newPlaceForm","newPlace","newPlaceCardName","elements","newPlaceCardlink","picturePopup","picturePopupImage","picturePopupCaption","popupCloseButtons","renderLoading","isLoading","button","initialText","arguments","undefined","loadingText","handleSubmit","request","submitButton","submitter","reset","finally","body","JSON","stringify","addedCard","newPlaceCard","prepend","about","patchUserData","dataUser","dir","saveButton","avatarUrl","avatar","updateAvatar","all","_ref","_ref2","initialCards","userData","backgroundImage","append","log"],"sourceRoot":""}